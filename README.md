# 📈 KlineCapture: LSTM捕捉历史相似K线形态

**基于统计及机器学习混合方法捕捉个股的相似K线**

K线形态能够帮助我们判断股票的价格趋势。通过统计量价指标相关性及训练机器学习模型，该匹配技术能够输出与当前K线最相似的历史区间，辅助未来价格浮动趋势判断。

---

## 📘 项目简介

本项目通过**LSTM神经网络与统计分析结合的方式**，从历史数据中捕捉与目标时间区间K线形态最相似的几个历史K线段。

- **输入**：目标时间区间（如近10个交易日）、全历史价格数据
- **输出**：最相似的三段历史K线区间及与目标K线的图形对比
- **数据源**：腾讯控股（0700.HK）历史K线数据

---

## 🗂 文件结构说明

| 文件名              | 说明 |
|---------------------|------|
| `lstm_v2.py`        | 主函数模块。输入目标区间与全历史数据，输出最相似历史K线段 |
| `hk0700allhis.csv`  | 腾讯控股完整历史K线数据（CSV格式） |
| `myplot.png`        | 使用纯统计指标匹配结果的可视化图 |
| `myplot_lstm.png`   | 使用LSTM模型与统计法混合匹配的可视化图 |
| `.idea/`            | 开发环境配置文件（可忽略） |

---

## 🧠 方法概述

### 📊 统计方法
- 使用技术指标（如收盘价变动率、振幅等）度量目标区间与历史窗口的相似度
- 输出最相似的历史K线段用于对比

### 🤖 LSTM模型
- 利用LSTM对历史K线进行编码
- 在隐空间中寻找与目标K线编码相似的历史片段
- 与统计方法结合，提升匹配精度

---

## 🖼️ 示例输出

- `myplot.png`：展示统计匹配结果与目标K线的对比图  
- `myplot_lstm.png`：展示融合LSTM模型后，匹配出的K线段与目标K线的对比图
